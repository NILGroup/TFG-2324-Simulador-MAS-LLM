\chapter*{Conclusions and Future Work}
\label{cap:conclusions}

In the present work, a system has been developed that allows access to multi-agent simulation for the study of social relationships and the investigation of the emergence of social phenomena. This will make it a very useful tool for any type of user without computer knowledge, such as psychologists (especially interested in social simulations), to analyze simulated human behavior and predict certain situations.

This chapter describes three subsections. The first one is a kind of discussion where, after presenting the original system in the State of the Art chapter and after seeing the implementations and work we have done throughout the rest of the chapters, we aim to show the impact that the changes made have had on the final result of the system, thus showing the differences in the application from the beginning to now. The second subsection deals with the conclusions after analyzing the work once completed. Finally, the last subsection delves into some of the possible future extensions that would have been included in this work if there had been enough time, as it would be interesting to see them implemented in the future.

\section{Differences between the Original and Current System}

Considering the functionalities that originally existed in the system, discussed in depth in section \ref{genAgents}, and knowing the series of developments that have been made to modify this application discussed in the previous chapters, we divide these modifications into two sections: extended functionalities and new functionalities.

\subsection{Extended functionalities}
This first section addresses the functionalities that were already originally developed. For these, there are some new features that have been implemented during the development of this work that are based on them to function, which are mentioned below.

\subsubsection{Whispers to characters through the interface}
As mentioned in section \ref{genAgents}, the functionality of whispering to the characters was already implemented in the original system. However, to do this, it was necessary to go to the terminal and from there select the character and the information.

As extended, one will be able to access one of the characters by clicking on their persona at the bottom of the simulation and once this is done, there will be a button where the user can directly communicate and whisper the action or personality they want the character to interpret.

This action flow is seen in Chapter 5 of the interface, more specifically in section \ref{botonSusurro}, where the whisper button and the resulting modal upon clicking this button can be seen.

\subsubsection{New views}
In addition to the existing views, new pages have been created so that the application can be used exclusively from the graphical interface, without the need to access the terminal (this helps non-technical people use the application) and unifying them all in different views.

On one hand, views such as the landing page, a page to create simulations from the web, and other pages to view and continue simulations have been created so that one can directly access them by simply clicking. On the other hand, existing views have also been enriched by adding buttons such as whispering or chatting with agents during the simulation.

Furthermore, a navigation bar has been added through which one can navigate the application and access all the necessary views to execute and visualize simulations.

\subsection{New functionalities}
Finally, there are functionalities that did not exist in the original application and we have added, thus adding value to the existing system and reiterating its importance for use in psychological research.

\subsubsection{Total interaction through the interface}
In addition to what was seen earlier regarding the whisper button to the characters, and continuing with the main goal of bringing this tool closer to less technological profiles, an adaptation that has been made is that all interactions with the tool can be developed from the frontend of the application.

Previously, it was necessary to create a backend instance to know the files that made up the system and interact with the program through the terminal. Now, users will be agnostic of the implementation, and when a simulation is executed, it will be created and interacted with through the terminal via the frontend. This functionality is explained in low detail in chapter \ref{cap:extensiones}.

\subsubsection{Real-time chat function with agents}
Similar to the whisper functionality, we have implemented a new feature where users can, in the middle of a simulation, chat with any of the characters to ask their opinion on certain topics, to see how they progress as the simulation advances.

In this case, it differs from the whisper as the chat interaction will not influence the agent's behavior in the simulation.

As with the whisper button, the interaction flow with the chat button and the pop-up window can be seen in section \ref{botonSusurro}.

\subsubsection{Saving and managing new simulations}

Regarding the saving of simulations, as it was initially organized, by using commands, one could exit the simulation execution, and it would be saved in a folder within the user's own system. The problem when returning to these simulations, both to view and continue them, was that they were all saved in the same folder, making them difficult to retrieve, as one had to add the exact name of the simulation through the console.

Now, simulations will continue to be saved in the same place and retain the same information, but to retrieve and execute or view them, they will be available in a single view, and with a simple click, one can access them to perform the desired action. Whether to continue the simulation or view it. Additionally, in the simulation viewing section, there will also be a link that redirects users to the simulation from which that replay originates, so they can modify it as they wish if they want to experiment with it.

Furthermore, the functionality of managing new simulations has been added, allowing them to be easily created and edited, as well as viewed, executed, or modified purely from the graphical interface.

\subsubsection{Simulation summaries}

To add value and context to the simulations, an automatic summary generation function has been added. Once the user performs a simulation and wants to save it to view it in the future, within the process of saving the simulation and compressing the data, a summary will also be generated automatically, calling the language model for this purpose, indicating at a high level what happened during the simulation and the moments when the most interesting situations to study occur (moments of interaction between agents, where the user interacted with them, where something important changes in the simulation, etc.) so that the researcher can visualize the most interesting moments or modify the simulation from that point.

These summaries will be available once the simulation is completed and saved, as an indication of what happened during it at a high level. If after reading the summary, the user wants to modify the simulation, they can take one of the reference times and edit the simulation from that point to study the differences depending on what changes from certain modifications at key moments in the simulation.

\section{Conclusions}

The initial intention of this Final Degree Project was to democratize the use of a multi-agent simulation system, which already existed previously, so that profiles such as psychologists could study social phenomena and experiment with relationships between different Artificial Intelligence agents.

To this end, at the beginning of this report, we introduced the objectives around which the development work would focus. In this conclusions section, we will reflect on whether these objectives have been met, briefly explaining the results.

Regarding the creation of simulations by configuring agents and/or the scenario, we have managed to create novel simulations allowing users to customize agents (adding their own personalities and allowing them to interact in different contexts). However, the initial map choice that was proposed was not ultimately implemented, as it would take a lot of design and drawing work, which deviates from the purpose of this FYP. What has been achieved is that users are agnostic to the map and can interact with it without being confined to a village (which was the initial context of the map).

After the project's development, interaction with the agents' state is allowed, both through the chat function and the whisper function. This was another marked objective and has been achieved by implementing the novel chat functionality with agents.

The objective of viewing the simulation through a character was previously implemented in the application, and the overall simulation view was also. The functionality of summary implementation has been added, as indicated in the third objective of the report, which is automatically generated by the language model and narrates what has been happening throughout the simulation.

Now, saving, retrieving, and deleting simulations is also allowed, thus easily managing their storage. Moreover, the functionality of continuing simulations or creating new ones from already existing ones has been implemented.

All these previously mentioned functionalities have also been integrated into a common interface. This interface centralizes all the necessary interaction with the application. Through it, users can manage and view simulations and interact with them. The interface serves as an entry point to experience all the system's functions.

The integration of the application with other language models alternative to the user's choice has not been implemented. However, all existing calls have been updated for their operation with the new OpenAI API (using the GPT-3.5 turbo model), and the number of calls has been optimized to make execution lighter.

Finally, a final result of the system was reached where we managed to meet almost all the marked objectives (once reconsidered), thus democratizing the use of this new tool for the investigation of social phenomena with Artificial Intelligence agents. It is also worth noting that, despite the development being completed, the costs of operating this application today with the OpenAI API we are using are extremely high. This is a problem for all multi-agent systems in general. If in a few years this cost is reduced or models small and powerful enough to execute this code credibly are released, it will be a highly potent tool, but today's technological limitations do not allow us to demonstrate all the application's capabilities.


Despite meeting the objectives and requirements specified at the beginning of the development, it is also true that as the work progressed, certain ideas emerged that would have had a positive impact on the project if there had been enough time to implement them all.

The decision we made midway through development was to prioritize certain objectives and fulfill those that had been proposed within the framework of this project. Once this prioritization was done, some objectives were left out of the development due to lack of time, despite how interesting they could have been.

Below is a list of some of the objectives we would have liked to implement and that are good ideas for future work:

\begin{itemize}
	\item \textbf{Map selection and change}: Given the necessary context, we could make the characters independent of the map. However, as the system was initially designed, each character was closely tied to the map, as parts of the map had the names of the characters. Once the characters were separated from the map, it would have been a good idea to create another alternative map or allow users to create their own maps. This was not given high priority since, as we mentioned, users can make the agents map-agnostic and simulate any other space.
	
	\item \textbf{Character customization}: As mentioned in section \ref{problemaPersonajes}, the main problem with the characters was that they were directly tied to the map, and their names were crucial for saving simulations and ensuring they worked correctly. However, by adding new maps, this could also be changed, allowing users to choose character names and decide or edit how each one will look.
	
	\item \textbf{Improving the graphical interface}: Although a specific design was created for the application's functionalities, experimenting with a different color scheme or static resources to style the various pages of the application could have been done, and investigating this is certainly a point to improve in the future.
	
	\item \textbf{Direct interaction with the environment}: In the original application, it was possible to modify certain parts of the environment. For example, one could take an object and change its state (e.g., say a character's bed was on fire and see how they reacted). However, translating this to the interface was quite complicated, as it would require delving into Phaser's implementation, recognizing each object with clicks, and then performing the environment modification query with the backend. It is an ambitious goal that would be very interesting to see and would add significant value to the application.
	
	\item \textbf{Free choice of LLM}: After investigating and testing many language models, we concluded that, with the current conditions, the least bad option to run this system is using the OpenAI API. This does not allow for many calls, but it is one of the few that can process the input we send and works well today. It would be interesting in the future for users to input their language models installed on their computers or to use any other API they have at their disposal.
	
	\item \textbf{More summaries}: Besides the summaries automatically generated when saving a simulation, it would be a good idea to save a greater number of summaries to help users locate each simulation. It could be beneficial to have summaries that indicate at which timestamps the most interesting events occur or to generate a summary for each of the application's characters automatically.
	
	\item \textbf{Branching simulations at any moment in time}: To provide a tool that creates realistic pseudo-social situations for analyzing the diversity of situations phenomena, we saw a unique interest in allowing the branching of already made simulations at any moment in time.
	
	This achieves the possibility of exploring alternative scenarios from critical points in time, which, combined with the synthesis provided by summaries, opens the door to creating simulations that generate unforeseen yet interesting situations. Once summarized, these can be detected and branched to observe the system's behavior when changes are introduced by the user.
	
	The implementation of this functionality involves saving the necessary system information at each moment in time so that any system moment can be replicated.
	
	The naive way to do this is to replicate the existing information at each moment in time. This approach is impractical due to the memory size a single simulation would occupy. Estimating a bit, based on a simulation of 3 agents and a total of 24 hours, i.e., 8640 steps, occupying a total of 57 MB. If we assume linear growth in space concerning the number of steps, which it is, this would imply a quadratic cost in space in simulated time. Taking the 24-hour simulation to approximately 1653 MB of space. This is not feasible, especially considering better ways to approach the solution.
\end{itemize}
